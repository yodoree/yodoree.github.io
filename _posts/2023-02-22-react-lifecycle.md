---
layout: post
title: React LifeCycle
categories: react
tags: [react, lifecycle, hook, til]
---

`리액트의 생명주기`

## 리액트 생명주기

모든 리액트 컴포넌트에는 생명주기가 존재한다.
생성(mount) -> 업데이트(update) -> 제거(unmount)의 생명주기를 갖는데
생명주기마다 구별해서 어떤 작업을 처리해야 하는지 잘 파악해야 한다.
이를 위해 클래스 컴포넌트는 라이프사이클 메소드를 사용하고
함수형 컴포넌트는 hook을 사용한다.
리액트 버전 16.8부터 hook이 나와 클래스형 컴포넌트는 거의 사용하지 않으므로
여기서는 hook에 대해서만 얘기해보도록 하겠다.

## React hook

리액트의 hook은 함수형 컴포넌트에서 state와 lifecycle 기능을 연동시켜주는 함수이다.

### 도입한 목적

기존 방식에 있던 문제점들을 해결하기 위해 도입되었다.

hook 이전에는 HOC(Higher Order Component)를 이용하여 코드를 반복해서 작성하는 문제를 해결하려고 했었다고 한다.
HOC란 화면에서 재사용 가능한 로직만을 분리해서 component로 만들고, 재사용 불가능한 부분을 인자로 받아 처리하는 패턴인데

즉, 리액트 컴포넌트를 인자로 받아서 새로운 리액트 컴포넌트를 리턴하는 함수이다.
하지만 이러한 패턴을 사용하면 wrapper hell이라는 문제가 발생하는데
이는 중첩되는 component가 많아져 depth가 깊어지는 것을 의미한다고 한다.
직접적으로 겪어보진 않았지만 복잡하거나 거대한 컴포넌트나 여러가지로 중첩되어 있는 컴포넌트를 상상해보면 꽤나 작업하기 싫을 것 같은 느낌이다.

또 class 기반의 구조가 리액트로 작업하는데 있어 쉽지 않은 방식이였다.
가독성 및 구조가 쉽게 배울 수 있는 부분이 아니였다.

이러한 문제들로 인해 리액트 hook이 등장하게 되었다.

공식문서를 살펴보면 react를 만드신 분들은 react가 새로 나오는 다른 기술들에 밀리지 않고
지속적으로 좋아질 수 있게 만들고 싶어하는 것 같다.

### hook의 사용법

1. hook은 함수의 최상위 컨텍스트에서만 호출해야 한다.
반복문, 조건문, 중첩된 함수 내에서 hook을 실행하면 안된다.

2. 리액트 함수 컴포넌트에서만 hook을 호출해야 하고, 일반 js함수에서는 hook을 호출해서는 안된다.

이 규칙을 강제하게 해주는 eslint-plugin-react-hooks 라는 플러그인이 있는데
CRA에 기본적으로 포함되어 있다.

Hook의 종류는 다양하기 때문에 하나씩 따로 알아보기로 하자.
